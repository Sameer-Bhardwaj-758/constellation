<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>For Reeya</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&display=swap" rel="stylesheet">
    <style>
        /* Force the body to be exactly the size of the screen */
        html, body { 
            margin: 0; 
            padding: 0; 
            width: 100vw; 
            height: 100vh; 
            overflow: hidden; 
            background-color: #050515; 
        }

        /* Force Canvas to fill the background and stay visible */
        #sky { 
            position: absolute; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            display: block;
            z-index: 1; 
        }
        
        #constellation-title { 
            position: absolute; 
            top: 40px; 
            width: 100%; 
            text-align: center; 
            font-family: 'Dancing Script', cursive; 
            font-size: 3.5em; 
            color: #ffb6ff; 
            z-index: 10; 
            pointer-events: none; 
        }
        
        #overlay { 
            position: fixed; 
            inset: 0; 
            background: #050515; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            z-index: 1000; 
        }

        #intro-box { 
            text-align: center; 
            color: white; 
            border: 2px solid #ffb6ff; 
            padding: 50px; 
            border-radius: 20px;
        }

        #start-btn { 
            background: #ffb6ff; 
            border: none; 
            padding: 15px 40px; 
            font-size: 1.2em; 
            cursor: pointer; 
            font-weight: bold;
            margin-top: 20px;
        }

        #popup { 
            position: fixed; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            background: #1a1a3a; 
            color: white; 
            padding: 30px; 
            border: 2px solid #ffb6ff; 
            z-index: 5000; 
            display: none; 
            text-align: center;
            border-radius: 15px;
        }

        #final-msg { 
            position: fixed; 
            top: 40%; 
            width: 100%; 
            text-align: center; 
            z-index: 100; 
            color: white; 
            display: none; 
            pointer-events: none;
        }
    </style>
</head>
<body>

    <div id="overlay">
        <div id="intro-box">
            <h1 style="font-family: 'Dancing Script'; font-size: 3em;">ðŸŒŒ For Reeya</h1>
            <p>Connect the stars to see my promises.</p>
            <button id="start-btn">Begin Our Journey</button>
        </div>
    </div>

    <div id="constellation-title">The Constellation Reeya</div>
    
    <div id="popup">
        <p id="popup-text" style="font-size: 1.2em;"></p>
        <button onclick="document.getElementById('popup').style.display='none'" style="margin-top:15px; cursor:pointer; padding:5px 15px; background:#ffb6ff; border:none;">Close</button>
    </div>

    <div id="final-msg">
        <h2 style="font-family: 'Dancing Script'; font-size: 4em; color: #ffb6ff;">âœ¨ My Valentine âœ¨</h2>
    </div>

    <canvas id="sky"></canvas>

    <script>
        const canvas = document.getElementById("sky");
        const ctx = canvas.getContext("2d");
        let stars = [], count = 0;

        // FIXED COORDINATES FOR DESKTOP
        const data = [
            {x: 0.2, y: 0.4, t: "I promise to choose you every day."},
            {x: 0.35, y: 0.6, t: "My heart will always belong to you."},
            {x: 0.5, y: 0.4, t: "I'll fill your life with sweetness."},
            {x: 0.65, y: 0.6, t: "I'll be your forever comfort."},
            {x: 0.8, y: 0.4, t: "I will stand beside you always."},
            {x: 0.6, y: 0.2, t: "Emotional hugs across distance."},
            {x: 0.4, y: 0.2, t: "Soft and true love forever."}
        ];

        function init() {
            // Set canvas size to match the window exactly
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            stars = data.map(s => ({
                x: s.x * canvas.width,
                y: s.y * canvas.height,
                t: s.t,
                clicked: false
            }));
            console.log("Stars initialized at:", stars); // Debugging check
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Background
            ctx.fillStyle = "#050515";
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Lines
            ctx.strokeStyle = "rgba(255, 182, 255, 0.4)";
            ctx.lineWidth = 2;
            ctx.beginPath();
            stars.forEach((s, i) => {
                if(i === 0) ctx.moveTo(s.x, s.y);
                else ctx.lineTo(s.x, s.y);
            });
            ctx.stroke();

            // Stars
            stars.forEach(s => {
                ctx.fillStyle = s.clicked ? "#ffb6ff" : "white";
                ctx.shadowBlur = 15;
                ctx.shadowColor = s.clicked ? "#ffb6ff" : "white";
                ctx.beginPath();
                ctx.arc(s.x, s.y, s.clicked ? 10 : 6, 0, Math.PI * 2);
                ctx.fill();
            });

            requestAnimationFrame(draw);
        }

        canvas.addEventListener("click", (e) => {
            const rect = canvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;

            stars.forEach(s => {
                const dist = Math.sqrt((mouseX - s.x)**2 + (mouseY - s.y)**2);
                if(dist < 30 && !s.clicked) {
                    s.clicked = true;
                    count++;
                    document.getElementById('popup-text').innerText = s.t;
                    document.getElementById('popup').style.display = 'block';
                    
                    if(count === stars.length) {
                        setTimeout(() => {
                            document.getElementById('final-msg').style.display = 'block';
                        }, 1000);
                    }
                }
            });
        });

        document.getElementById('start-btn').addEventListener('click', () => {
            document.getElementById('overlay').style.display = 'none';
            init();
            draw();
        });

        // Ensure it handles window resizing
        window.addEventListener('resize', init);
    </script>
</body>
</html>
